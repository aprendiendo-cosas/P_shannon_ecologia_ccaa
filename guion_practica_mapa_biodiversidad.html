<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'><style type='text/css'>html {overflow-x: initial !important;}</style>
<style type='text/css'  id="style-base">:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, "Segoe UI Emoji", "SF Pro", sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.428571; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p *, #write.first-line-indent svg * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-variant-alternates: inherit; font-variant-ligatures: inherit; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-variant-position: inherit; font-feature-settings: inherit; font-optical-sizing: inherit; font-variation-settings: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; position: relative; }
#write svg h1, #write svg h2, #write svg h3, #write svg h4, #write svg h5, #write svg h6, #write svg p { position: static; white-space: nowrap; overflow: visible; }
foreignObject { overflow: visible; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
li p { orphans: 1; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; border-right-style: none; border-right-color: currentcolor; background-color: inherit; }
.CodeMirror-linenumber { -webkit-user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: medium; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: medium !important; border-style: none !important; border-color: currentcolor !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; border-bottom-style: none; border-bottom-color: currentcolor; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: medium; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.mermaid-svg { margin: auto; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.428571rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left-width: 28px; border-left-style: solid; border-left-color: transparent; border-right-width: 28px; border-right-style: solid; border-right-color: transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right-width: 8px; border-right-style: solid; border-right-color: transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left-width: 0.25em; border-left-style: solid; border-left-color: rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }

</style>
<style type='text/css'  id="style-codemirror">.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: medium !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}

</style>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&amp;subset=latin,latin-ext' type='text/css' />
<style type='text/css'  id="style-theme_css">:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', 'SF Pro', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    pre {
        page-break-inside: avoid;
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.mac-os #write{
    caret-color: AccentColor;
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}
</style>
<style type='text/css'  id="style-lp">ol, ul {padding-left: 40px}</style>
<style type='text/css'  id="style-mac-print"> @media print { @page {margin: 0 0 0 0;} body.typora-export {padding-left: 0; padding-right: 0;} #write {padding:0;}}</style>

<title>guion_practica_mapa_biodiversidad</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='construcción-de-un-mapa-de-diversidad-índice-de-shannon-de-sierra-nevada'><span>Construcción de un mapa de diversidad (índice de Shannon) de Sierra Nevada</span></h1><blockquote><ul><li><p><strong><em><span>Tipo de material</span></em></strong><span>: </span><span style="display: inline-block; font-size: 12px; color: white; background-color: #4caf50; border-radius: 5px; padding: 5px; font-weight: bold;"><span> Prácticas</span></span><span> </span></p></li><li><p><strong><em><span>Versión</span></em></strong><span>: 2025-2026</span></p></li><li><p><strong><em><span>Asignatura (grado)</span></em></strong><span>: Ecología (Ciencias ambientales). </span></p></li><li><p><strong><em><span>Autor</span></em></strong><span>: Curro Bonet-García (fjbonet@uco.es)</span></p></li><li><p><strong><em><span>Duración</span></em></strong><span>: 2 sesiones de 2 horas y otras 2 horas en casa.</span></p></li></ul></blockquote><p>&nbsp;</p><h2 id='objetivos'><span>Objetivos</span></h2><p><span>Esta práctica tiene los siguientes objetivos:</span></p><ul><li><p><span>Disciplinares:</span></p><ul><li><p><span>Aprender un método para cuantificar la diversidad biológica. Índice de Shannon.</span></p></li><li><p><span>Aprender a generar mapas de diversidad biológica. Mapas de distribución del índice de Shannon.</span></p></li><li><p><span>Reconocer patrones de distribución de la diversidad en un territorio concreto (Sierra Nevada).</span></p></li><li><p><span>Identificar las causas de los patrones anteriores.</span></p></li><li><p><span>Cuantificar la diversidad de los distintos tipos de ecosistemas con los que estamos trabajando en las prácticas. Concretamente, cada estudiante obtendrá un valor de diversidad promedio del ecosistema con el que trabaja. </span></p></li></ul></li><li><p><span>Instrumentales:</span></p><ul><li><p><span>Afianzar nuestro conocimiento de SIG.</span></p></li><li><p><span>Seguir aprendiendo el lenguaje de programación R e iniciarnos en su manejo.</span></p></li><li><p><span>Aprender algunos conceptos básicos de las bases de datos relacionales.</span></p></li></ul></li></ul><p>&nbsp;</p><h2 id='contextualización-ecológica'><span>Contextualización ecológica</span></h2><p><span>Esta sesión práctica está muy relacionada con el tema en el que hablamos de la diversidad de las </span><a href='https://rawcdn.githack.com/aprendiendo-cosas/Te_comunidades_diversidad_ecologia_ccaa/main/guion_comunidades_diversidad.html'><span>comunidades ecológicas</span></a><span>. En concreto, usaremos los conocimientos adquiridos en esa sesión para construir un mapa de biodiversidad de Sierra Nevada. Esto quiere decir, que debes de repasar dichos conceptos con objeto de que el aprendizaje de esta práctica sea realmente efectivo.</span></p><p><span>Disponer de un mapa que muestre cómo se distribuye la diversidad en el territorio es muy útil por muchas razones. En primer lugar, nos ayuda a leer el paisaje con la mirada de la ecología. Como sabemos que la diversidad está relacionada con elementos clave como la resistencia y la resiliencia, sabiendo cómo se distribuye la diversidad estamos también adquiriendo información sobre cómo se distribuyen las propiedades anteriores en el territorio. Esta información es también muy valiosa para gestionar el territorio. Por ejemplo, los lugares en los que hay baja diversidad, pero tienen las condiciones ambientales adecuadas para que sea alta, requerirán actuaciones de restauración por nuestra parte.</span></p><p><span>Para cuantificar la diversidad biológica se pueden utilizar muchos índices. En nuestro caso usaremos el denominado índice de Shannon-Wiever, que es uno de los más robustos y comunmente utilizados.</span></p><p>&nbsp;</p><h2 id='metodología-docente-y-flujo-de-trabajo'><span>Metodología docente y flujo de trabajo</span></h2><p><span>Como habrás leído en el apartado de objetivos, nos planteamos cuestiones muy diferentes en esta práctica. Por un lado hay objetivos ecológicos y por otros hay también objetivos instrumentales relacionados con el manejo de SIG y de R. Para satisfacer ambos tipos de objetivos seguiremos una metodología docente que combina estas dos:</span></p><ul><li><p><strong><span>Aproximación de complejidad creciente</span></strong><span>: Cuando aprendemos algo nuevo, es útil ir incorporando ideas y conceptos poco a poco, aumentando la complejidad hasta llegar al &quot;destino final&quot; del aprendizaje. En nuestro caso, explicaré la metodología que seguiremos usando tres niveles de complejidad: uno con una presentación, otro en la pizarra y finalmente habrá disponible un esquema digital muy detallado. Este flujo de trabajo describe los pasos que seguiremos con R para generar el mapa de diversidad.</span></p></li><li><p><strong><span>Enseñanza incremental:</span></strong><span> Este método docente implica dividir las tareas en bloques cuyo abordaje implica satisfacer objetivos de aprendizaje específicos. Además, para avanzar en el flujo de trabajo será necesario ir completando los bloques de manera secuencial. Aplicar esta técnica implica que el guión se divide en bloques específicos y explicados de manera individual.</span></p></li><li><p><strong><span>Andamiaje:</span></strong><span> Esto consiste en que durante el aprendizaje yo os dejaré andamios en forma de pistas, sugerencias, pequeños retos, etc. para mejorar vuestras habilidades con R. No os daré el código completo, sino que os daré apoyos temporales que os ayudarán a realizar tareas que aún no sabéis hacer de forma autónoma. A lo largo de los bloques en los que se divide la metodología aparecerán varios de estos andamios. Se irán retirando progresivamente conforme vayáis aprendiendo. En los últimos bloques habrá menos pistas. Es decir, habrá un proceso de asunción paulatina de responsabilidad por vuestra parte. </span></p></li></ul><p><span>Atendiendo a todo lo anterior, el guión se divide en los siguientes apartados a partir de aquí:</span></p><ul><li><p><span>Primer nivel de complejidad: ideas generales del flujo de trabajo a seguir y conexión la teoría.</span></p></li><li><p><span>Segundo nivel de complejidad: conexión del flujo de trabajo con los datos reales que usaremos. Descripción en la pizarra.</span></p></li><li><p><span>Tercer nivel de complejidad: traducción del flujo de trabajo a un programa de R.</span></p></li></ul><p><span>Vamos a ello:</span></p><p>&nbsp;</p><h2 id='primer-nivel-de-complejidad-ideas-generales-del-flujo-de-trabajo-a-seguir-y-conexión-con-la-teoría'><em><span>Primer nivel de complejidad</span></em><span>: ideas generales del flujo de trabajo a seguir y conexión con la teoría.</span></h2><p><span>La siguiente presentación muestra los conceptos básicos necesarios para hacer la práctica. También puedes verla </span><a href='https://prezi.com/view/cUj8WyKbNsFotcpylja0/'><span>aquí</span></a><span> y descargarla </span><a href='https://github.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/raw/main/presentacion/1_mapa_biodiv_ecologia_ccaa.exe'><span>aquí</span></a><span> para Windows y </span><a href='https://github.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/raw/main/presentacion/1_mapa_biodiv_ecologia_ccaa.zip'><span>aquí</span></a><span> para Mac. Y </span><a href='https://github.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/raw/main/presentacion/1_mapa_biodiv_ecologia_ccaa.pdf'><span>aquí</span></a><span> la tienes en formato pdf. En esta presentación se describe de manera muy general cómo se realizará el mapa de biodiversidad. Se trata de la primera explicación de este tipo que realizamos durante la clase. </span></p><iframe src="https://prezi.com/p/embed/cUj8WyKbNsFotcpylja0/" id="iframe_container" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" allow="autoplay; fullscreen" height="515" width="560"></iframe><p><span>En este primer nivel de complejidad aprenderemos:</span></p><ul><li><p><span>Cómo podemos calcular el índice de Shannon de una comunidad a partir de unos datos tomados en campo.</span></p></li><li><p><span>Algunas nociones básicas de bases de datos relacionales. Vemos concretamente cómo se agrupan datos por un campo y cómo se unen tablas. Estos conceptos serán muy útiles en esta práctica.</span></p></li><li><p><span>Los conteos de individuos por especie se muestran ya de manera agregada. Contamos el número de individuos que hay de cada especie y ya tenemos esos datos en una tabla. En realidad, nuestros datos se organizan de otra manera. En el siguiente nivel de complejidad en qué consiste esta diferencia.</span></p></li></ul><p>&nbsp;</p><h2 id='segundo-nivel-de-complejidad-conexión-del-flujo-de-trabajo-con-los-datos-reales-que-usaremos-descripción-en-la-pizarra'><em><span>Segundo nivel de complejidad</span></em><span>: conexión del flujo de trabajo con los datos reales que usaremos. Descripción en la pizarra.</span></h2><p><span>En este segundo nivel de complejidad explicaré con el apoyo de la pizarra y de manera más concreta lo que haremos durante esta práctica. Partiendo del esquema planteado en el primer nivel de complejidad, incorporaremos una serie de elementos nuevos:</span></p><ul><li><p><span>Las fuentes de datos que usaremos para la práctica: mapa de distribución de comunidades ecológicas y mapa de presencia de especies.</span></p></li><li><p><span>Los procesos de importación de los datos en R.</span></p></li><li><p><span>Algunas funcionalidades de R relacionadas con los SIG. Es decir, cómo R puede ser un SIG muy potente.</span></p></li><li><p><span>Cómo se agrega la información numérica en las tablas para calcular el índice de Shannon.</span></p></li></ul><p><span>A continuación se muestra lo que se dibujó en la pizarra. Hay varias versiones:</span></p><p><em><span>Versión más pausada hecha el día de antes de la práctica en la pizarra de mi despacho...</span></em></p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/main/imagenes/esquemas_pizarra/pizarra_despacho.jpg" alt="pizarra"></p><p><em><span>Versión algo más cutre hecha en la pizarra digital de la clase en la sesión del GM-2</span></em></p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/main/imagenes/esquemas_pizarra/Diapositiva1.jpeg" alt="Diapo1"></p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/main/imagenes/esquemas_pizarra/Diapositiva2.jpeg" alt="Diapo2"></p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/main/imagenes/esquemas_pizarra/Diapositiva3.jpeg" alt="Diapo3"></p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/main/imagenes/esquemas_pizarra/Diapositiva4.jpeg" alt="Diapo4"></p><p><span>A continuación se describen con más detalle las fuentes de datos que utilizaremos en esta práctica. También se ofrecen los enlaces para descargar los datos.</span></p><h3 id='información-de-distribución-de-especies-en-sierra-nevada-a-partir-de-gbif'><span>Información de distribución de especies en Sierra Nevada a partir de GBIF</span></h3><p><span>Es el primer paso fundamental porque necesitamos esta información para calcular el índice de Shannon. Para conseguir datos de presencia de especies en Sierra Nevada usaremos una infraestructura digital denominada </span><a href='https://www.gbif.org/'><span>GBIF</span></a><span> (Global Biodiversity Information Facility). Se trata de un portal desde el que se tiene acceso a millones de datos de presencia de especies procedentes de colecciones biológicas (herbarios, colecciones animales, etc.) de todo el planeta. Esta iniciativa está promovida y mantenida por multitud de países que han puesto en común toda la información de la que disponen para conocer mejor la distribución de la biodiversidad en la Tierra. Accederemos a este portal y descargaremos toda la información de presencia de especies en Sierra Nevada. Esto nos dará una idea bastante aproximada de cómo se distribuye la diversida en esta zona. En nuestro caso, GBIF aporta una enorme cantidad de registros de presencia de especies en Sierra Nevada. Durante la práctica visitamos el portal de GBIF y simulamos la descarga. Como este proceso puede tardar unas horas, utilizamos datos que fueron descargados anteriormente por el profesor. Dichos datos de presencia de especies tienen el siguiente &quot;aspecto&quot; cuando son visualizados en QGIS. </span><a href='https://github.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/raw/main/geoinfo/csv_gbif_sierra_nevada.zip'><span>Aquí</span></a><span> puedes descargar la capa con los datos de presencia de especies de Sierra Nevada en el mismo formato en el que se obtienen de GBIF. Usaremos este archivo para generar el mapa de biodiversidad de Sierra Nevada.</span></p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/2024_2025/imagenes/puntos.png" alt="puntos"></p><h3 id='distribución-de-las-comunidades-ecológicas-que-conforman-sierra-nevada'><span>Distribución de las comunidades ecológicas que conforman Sierra Nevada.</span></h3><p><span>Este paso es el más complejo conceptualmente, ya que las comunidades no tienen un límite espacial preciso. Es decir, están conectadas entre sí y no es fácil delimitar donde empieza una y acaba otra. Usaremos un mapa de vegetación para delimitar las comunidades de Sierra Nevada. Asumiremos que cada polígono de dicho mapa es una comunidad ecológica. Es una asunción importante, pero es la mejor que podemos hacer con la información disponible. </span><a href='https://github.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/raw/main/geoinfo/vegetacion_snevada_23030.zip'><span>Aquí</span></a><span> puedes descargar el mapa de comunidades que usaremos en esta práctica. El enlace anterior contiene un fichero de formas (Shapefile) con la delimitación de los polígonos del mapa de vegetación a escala 1:10.000. La siguiente figura muestra la delimitación de estas comunidades en Sierra Nevada. Aunque el mapa no tiene escala, podrás reconocer el contorno del espacio protegido de Sierra Nevada. El mapa de vegetación que usamos procede de un mapa de vegetación de Andalucía generado por la REDIAM (Red de Información Ambiental de Andalucía), que es un organismo dependiente del gobierno regional y que se encarga de generar y publicar información ambiental de todo tipo.</span></p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/2024_2025/imagenes/comunidades.png" alt="comunidades"></p><p>&nbsp;</p><p><span>A partir de estas dos fuentes de datos obtendremos el índice de Shannon para cada una de las comunidades de Sierra Nevada. Es decir, usaremos los datos de presencia de cada especie que hay en cada una de las comunidades para calcular su índice de Shannon. En la siguiente figura puedes ver la distribución de ocurrencias de especies en unas cuantas comunidades.</span></p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/2024_2025/imagenes/puntos_sobre_comunidades.png" alt="puntos_comunidades"></p><p>&nbsp;</p><h2 id='tercer-nivel-de-complejidad-traducción-del-flujo-de-trabajo-a-un-programa-de-r'><em><span>Tercer nivel de complejidad</span></em><span>: traducción del flujo de trabajo a un programa de R</span></h2><p><span>En los siguientes bloques se muestra paso a paso cómo generar el mapa de diversidad de Sierra Nevada. Podrás ver el código de R que se usa en cada bloque. Y aquí puedes descargar el programa de R completo.</span></p><hr /><p>&nbsp;</p><h3 id='bloque-1-preparación-del-entorno-de-trabajo-en-r'><span>Bloque 1: Preparación del entorno de trabajo en R</span></h3><h4 id='características-del-bloque'><span>Características del bloque</span></h4><ul><li><p><strong><span>Objetivos de aprendizaje R</span></strong></p><ul><li><p><span>Configuración del directorio de trabajo.</span></p></li><li><p><span>Instalación y carga de los paquetes necesarios.</span></p></li></ul></li><li><p><strong><span>Objetivos de aprendizaje ecológico</span></strong></p></li><li><p><strong><span>Nivel de andamiaje</span></strong></p><ul><li><p><span>Alto. El profesor lo hace y los estudiantes repiten después.</span></p></li></ul></li></ul><h4 id='procedimiento-en-r'><span>Procedimiento en R</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ------------ 1.1 DIRECTORIO DE TRABAJO ------------</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Establece directorio de trabajo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># IMPORTANTE: Cambia esta ruta a la carpeta donde guardaste los archivos. Recuerda cambiar el sentido de la barra en función de tu sistema operativo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">setwd</span>(<span class="cm-string">"/tu/ruta"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Verificar que estamos en el directorio correcto</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">getwd</span>() &nbsp;<span class="cm-comment"># Debe mostrar la ruta que acabas de establecer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ------------ 1.2 INSTALACIÓN DE PAQUETES ------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Los paquetes son "bibliotecas" que añaden funcionalidad a R. Recuerda que solo hay que instalarlos una vez, pero cuando cierres R tendrás que volver a cargarlos en memoria con la función library</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># sf: Para trabajar con datos vectoriales (puntos, polígonos)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"sf"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">sf</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># terra: Para trabajar con datos raster (mapas en formato cuadrícula)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"terra"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">terra</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># sqldf: Para manipular tablas como si fueran bases de datos</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"sqldf"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">sqldf</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 550px;"></div><div class="CodeMirror-gutters" style="display: none; height: 550px;"></div></div></div></pre><p>&nbsp;</p><hr /><h3 id='bloque-2-importación-y-transformación-de-datos-de-presencia-de-especies'><span>Bloque 2: Importación y transformación de datos de presencia de especies</span></h3><h4 id='características-del-bloque-2'><span>Características del bloque</span></h4><ul><li><p><strong><span>Objetivos de aprendizaje R</span></strong></p><ul><li><p><span>Importar datos tabulares con una componente espacial.</span></p></li><li><p><span>Inspeccionar la estructura de datos.</span></p></li></ul></li><li><p><strong><span>Objetivos de aprendizaje ecológico</span></strong></p><ul><li><p><span>Comprender qué es GBIF y qué tipo de datos contiene.</span></p></li><li><p><span>Entender las limitaciones de los datos de GBIF.</span></p></li><li><p><span>Identificar los campos relevantes para nuestro estudio.</span></p></li><li><p><span>Evaluar la cantidad de datos de presencia.</span></p></li></ul></li><li><p><strong><span>Nivel de andamiaje</span></strong></p><ul><li><p><span>Medio-alto. El profesor lo hace casi todo y los estudiantes repiten después. Solo hay un paso en el que los estudiantes deben de recordar lo visto en la práctica anterior.</span></p></li></ul></li></ul><h4 id='procedimiento-en-r-2'><span>Procedimiento en R</span></h4><ul><li><p><strong><span>2.1.</span></strong><span> Primero usamos la función </span><code>read.csv</code><span> para cargar en R el archivo llamado </span><code>0118822-200613084148143.csv</code><span> que ya debes haber descargado en la sección anterior. Como es una función que ya hemos usado, trata de aplicarla tú en función de la experiencia previa. Para saber si el archivo </span><code>csv</code><span> tiene encabezado, cuáles son los delimitadores de campos y de decimales, solo tienes que abrirlo con un editor de texto. El objeto de R que deberá almacenar los datos de presencia se llama </span><code>presencias</code><span>. </span></p></li></ul><details>
<summary>Haz click aquí para mostrar el código a continuación. Usa esta opción si no lo consigues por ti mismo/a</summary><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">presencias</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.csv</span>(<span class="cm-string">"0118822-200613084148143.csv"</span>, <span class="cm-variable">header</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>, <span class="cm-variable">sep</span> <span class="cm-operator">=</span> <span class="cm-string">","</span>, <span class="cm-variable">dec</span> <span class="cm-operator">=</span> <span class="cm-string">"."</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p></details></p><ul><li><p><strong><span>2.2.</span></strong><span> Para comprobar que hemos importado bien los datos, observamos la estructura y contenidos de la tabla </span><code>presencias</code><span>.</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ¿Cuántos registros de presencia tenemos?</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># la función nrow() cuenta el número de filas de un data frame (tabla)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nrow</span>(<span class="cm-variable">presencias</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Ver nombres de todas las columnas disponibles</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># la función names() devuelve los nombres de las columnas de un data frame</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">names</span>(<span class="cm-variable">presencias</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Ver las primeras 6 filas para entender la estructura</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># la función head() muestra las primeras filas de un data frame</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">presencias</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 264px;"></div><div class="CodeMirror-gutters" style="display: none; height: 264px;"></div></div></div></pre><ul><li><p><strong><span>2.3.</span></strong><span> A partir de la información anterior,</span></p><ul><li><p><span>¿Qué columnas nos indican la especie del punto de presencia en cuestión?</span></p></li><li><p><span>¿Cuáles contienen información sobre la ubicación geográfica del punto? </span></p></li></ul></li><li><p><strong><span>2.4</span></strong><span> Las respuestas a las preguntas anteriores nos permiten saber cuántas especies diferentes hay en la tabla:</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Ver las primeras 6 filas para entender la estructura</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># la función head() muestra las primeras filas de un data frame</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">presencias</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ¿Cuántas especies diferentes aparecen?</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># la función length() cuenta el número de elementos en un vector (que puede ser una tabla o una columna)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># la función unique() devuelve los valores únicos de un vector. En este caso de la columna scientificName</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">length</span>(<span class="cm-variable">unique</span>(<span class="cm-variable">presencias</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">scientificName</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 242px;"></div><div class="CodeMirror-gutters" style="display: none; height: 242px;"></div></div></div></pre><ul><li><p><strong><span>2.5</span></strong><span> A continuación te propongo una actividad voluntaria que no es necesaria para el objetivo final de la práctica. La idea es que crees una gráfica de barras que muestre la información de abundancia de cada especie como lo hacen las gráficas de &quot;rango abundancia&quot; que vimos en teoría. Es decir, un gráfico parecido al que se muestra a continuación. Busca información en internet o pregunta a tu IA favorita. Recuerda que partes de la tabla </span><code>presencias</code><span>. Para generar la gráfica tienes que dar los siguientes pasos:</span></p><ul><li><p><span>Generar una tabla que cuente la abundancia de cada especie. Llama a esa tabla </span><code>abundancias</code><span>. Para obtenerla puedes usar una función llamada </span><code>table</code><span>que cuenta las ocurrencias de cada valor de una tabla.</span></p></li><li><p><span>Luego ordena esa tabla de mayor a menor. Crea una tabla llamada </span><code>abundancias_ordenadas</code><span> usando la función </span><code>sort</code><span>.</span></p></li><li><p><span>Finalmente, usa la función </span><code>barplot</code><span> para generar el gráfico.</span></p></li></ul><p><span>Podrás ver el código más abajo. No lo uses directamente hasta que hayas pasado al menos 5&#39; intentándolo tú misma/o. Este paso no es necesario para generar el mapa de diversidad, pero haciéndolo mejoramos nuestro conocimiento de R.</span></p></li></ul><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/refs/heads/main/imagenes/equitatividad.png" alt="equitatividad"></p><details>
<summary>Haz click aquí para mostrar el código a continuación. Usa esta opción si no lo consigues por ti mismo/a</summary><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Generar histograma de abundancias de especies ordenadas de mayor a menor abundancia en el eje x</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># la función table() cuenta las ocurrencias de cada valor en un tabla. Es decir, cuenta cuántos valores diferentes hay en el campo `scientificName` de `presencias</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abundancias</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">presencias</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">scientificName</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ordenar las abundancias de mayor a menor usando la función sort()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abundancias_ordenadas</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sort</span>(<span class="cm-variable">abundancias</span>, <span class="cm-variable">decreasing</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Genera una gráfica de barras mostrando las abundancias de especies ordenadas de mayor a menor abundancia en el eje x.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-variable">abundancias_ordenadas</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">las</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Rota los nombres de las especies para que se vean mejor</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"lightblue"</span>, &nbsp; &nbsp; <span class="cm-comment"># Color de las barras</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Abundancia de especies registradas"</span>, <span class="cm-comment"># Título del gráfico</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"Número de registros"</span>, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Etiqueta del eje y</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Especies"</span>) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Etiqueta del eje x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 418px;"></div><div class="CodeMirror-gutters" style="display: none; height: 418px;"></div></div></div></pre><p></details></p><p><span>Una vez que obtengas el gráfico, nos preguntamos: ¿dirías que Sierra Nevada en general es muy equitativa o poco? ¿ves razonable los resultados obtenidos en la gráfica?</span></p><ul><li><p><strong><span>2.6.</span></strong><span> Si no te has animado a generar el gráfico, sigue por aquí.</span></p></li><li><p><strong><span>2.7.</span></strong><span> La tabla que hemos importado de GBIF tiene dos campos con coordenadas. Pero R no ha reconocido este objeto como una capa georreferenciada de manera automática. Tenemos que decirle explícitamente que el objeto importado es una capa geográfica. Eso se hace aplicando la función </span><code>st_as_sf</code><span> que convierte una tabla común (data frame) en un objeto espacial de R. El código es el siguiente. En el código solo tienes que reemplazar los guiones por los nombres de los campos que muestran las coordenadas X e Y en la tabla de </span><code>presencias</code><span>. El otro argumento de la función es </span><code>crs</code><span>. Ahí ponemos el código del sistema de coordenadas en el que están los datos de </span><code>presencias</code><span>: 23030. El objeto resultante se llama </span><code>presencias_23030</code><span> tiene el mismo número de filas y columnas que </span><code>presencias</code><span>. La única diferencia es que es un objeto espacial.</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Convertir las coordenadas UTM en un objeto espacial usando la función st_as_sf</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># En el código de abajo solo tienes que incluir los nombres de los campos de la capa "presencias" que muestran las coordenadas de cada punto en UTM</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">presencia_23030</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_as_sf</span>(<span class="cm-variable">presencias</span>, <span class="cm-variable">coords</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"----"</span>, <span class="cm-string">"----"</span>),<span class="cm-variable">crs</span> <span class="cm-operator">=</span> <span class="cm-number">23030</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre><ul><li><p><strong><span>2.8.</span></strong><span> Como tal objeto espacial, podemos representarlo gráficamente. Para dibujar un mapa sencillo que nos de una idea del aspecto de nuestros datos, podemos usar las funciones </span><code>plot</code><span> y </span><code>st_geometry</code><span>. Este último argumento indica a R que use la geometría del objeto para hacer la visualización. Tienes el código a continuación</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Hacer un mapa sencillo para ver si tiene sentido geográficamente</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">st_geometry</span>(<span class="cm-variable">presencia_23030</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">pch</span> <span class="cm-operator">=</span> <span class="cm-number">20</span>, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Tipo de símbolo (puntos pequeños)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">cex</span> <span class="cm-operator">=</span> <span class="cm-number">0.1</span>, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Tamaño de puntos</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"darkgreen"</span>, &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Color</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Presencias de especies en Sierra Nevada"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 132px;"></div><div class="CodeMirror-gutters" style="display: none; height: 132px;"></div></div></div></pre><p>&nbsp;</p><p>&nbsp;</p><hr /><h3 id='bloque-3-importación-de-la-capa-de-comunidades-ecológicas'><span>Bloque 3: Importación de la capa de comunidades ecológicas.</span></h3><h4 id='características-del-bloque-3'><span>Características del bloque</span></h4><ul><li><p><strong><span>Objetivos de aprendizaje R</span></strong></p><ul><li><p><span>Importar datos geográficos vectoriales (shapefile)</span></p></li><li><p><span>Inspeccionar la estructura de datos.</span></p></li><li><p><span>Recordar el concepto de sistema de referencia espacial</span></p></li><li><p><span>Conocer los formatos de R para almacenar información geográfica.</span></p></li></ul></li><li><p><strong><span>Objetivos de aprendizaje ecológico</span></strong></p><ul><li><p><span>Entender la estructura de datos del mapa de vegetación.</span></p></li><li><p><span>Entender las asunciones que hacemos al considerar que los polígonos del mapa de vegetación son comunidades ecológicas.</span></p></li></ul></li><li><p><strong><span>Nivel de andamiaje</span></strong></p><ul><li><p><span>Medio. Intentamos hacer este bloque juntos en clase. El código está presente en el guión pero oculto. Se abre solo cuando le das a una opción.</span></p></li></ul></li></ul><h4 id='procedimiento-en-r-3'><span>Procedimiento en R</span></h4><ul><li><p><strong><span>3.1.</span></strong><span> Pistas</span></p><ul><li><p><span>Queremos importar a R la capa llamada </span><code>vegetación_snevada_23030.shp</code></p></li><li><p><span>Para ello necesitamos usar una función del paquete </span><code>sf</code><span> que ya hemos cargado en memoria.</span></p></li><li><p><span>La función que necesitamos es similar a </span><code>read_csv()</code><span> pero para capas geográficas.</span></p></li><li><p><span>Puedes buscar en google o preguntar a tu IA favorita...</span></p></li></ul></li></ul><details>
<summary>Intenta generar el código por tus medios. Si después de 5' no lo has conseguido haz click aquí</summary><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">comunidades</span><span class="cm-operator cm-arrow">&lt;-</span><span class="cm-variable">st_read</span>(<span class="cm-string">"vegetacion_snevada_23030.shp"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p></details></p><hr /><h3 id='bloque-4-unión-espacial-y-preparación-de-datos-para-el-cálculo-de-la-diversidad'><span>Bloque 4: Unión espacial y preparación de datos para el cálculo de la diversidad</span></h3><h4 id='características-del-bloque-4'><span>Características del bloque</span></h4><ul><li><p><strong><span>Objetivos de aprendizaje R</span></strong></p><ul><li><p><span>Realizar una unión espacial (spatial join) entre puntos y polígonos (asignar a cada punto el polígono en el que se encuentra)</span></p></li><li><p><span>Filtrar atributos relevantes</span></p></li></ul></li><li><p><strong><span>Objetivos de aprendizaje ecológico</span></strong></p><ul><li><p><span>Entender que los datos con los que trabajamos son incompletos.</span></p></li><li><p><span>Comprender las implicaciones que tiene la unión espacial que vamos a hacer.</span></p></li></ul></li><li><p><strong><span>Nivel de andamiaje</span></strong></p><ul><li><p><span>Alto. El profesor lo hace y los estudiantes repiten después.</span></p></li></ul></li></ul><h4 id='procedimiento-en-r-4'><span>Procedimiento en R</span></h4><ul><li><p><strong><span>4.1.</span></strong><span> La unión espacial implica asignar a cada punto de la capa </span><code>presencias_23030</code><span> el código del polígono de la capa </span><code>comunidades</code><span> en el que se encuentra. Para ello usamos la función </span><code>join</code><span> que además de los atributos de las dos capas, permite borrar aquellos puntos que no caen sobre ningún polígono. Para ello usamos el argumento </span><code>left = FALSE</code><span>. </span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Hacemos unión espacial. Asigna a cada punto el código de la comunidad en la que se encuentra.</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">presencias_x_comunidades</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_join</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">presencias_23030</span>, &nbsp;<span class="cm-comment"># Puntos (presencias_23030)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">comunidades</span>, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Polígonos (comunidades_23030)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">left</span> <span class="cm-arg-is">=</span> <span class="cm-variable">FALSE</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Eliminar puntos que no caen en ningún polígono</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 176px;"></div><div class="CodeMirror-gutters" style="display: none; height: 176px;"></div></div></div></pre><ul><li><p><strong><span>4.2.</span></strong><span> Una vez hecha la unión, comprueba cuántas filas tiene la capa </span><code>presencias_23030</code><span> y cuántas el resultado de la unión espacial (</span><code>presencias_x_comunidades</code><span>). ¿Por que han desaparecido tantos puntos?</span></p></li><li><p><strong><span>4.3</span></strong><span>. El siguiente paso consiste en preparar la capa de </span><code>presencias_x_comunidades</code><span> para hacer los calculos del índice de Shannon. Esto implica crear una tabla que contenga solo los datos alfanuméricos (campos con valores numéricos). Necesitamos hacer esto porque el paquete con el que haremos los cálculos (</span><code>sqldf</code><span>) no es capaz de operar con capas geográficas. Procedemos así</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Convertimos el objeto espacial sf a una tabla "normal"(dataframe)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bio</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">presencias_x_comunidades</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 44px;"></div><div class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre><ul><li><p><strong><span>4.4.</span></strong><span> Ahora vamos a simplificar un poco la tabla. Tenemos muchos campos y en realidad solo nos interesan dos: </span><code>OBJECTID</code><span> y </span><code>scientificName</code><span>. Para quitar el resto de campos, creamos un clon del objeto creado anteriormente (</span><code>bio</code><span>) pero que contenga solo esos campos. Para eso usamos la función </span><code>c</code><span> de R. En realidad no es una función, es una forma de seleccionar campos en una tabla. El código es así:</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Quedarnos SOLO con las dos columnas que necesitamos:</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># - OBJECTID: identifica el polígono (comunidad)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># - scientificName: identifica la especie</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bio</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">bio</span>[<span class="cm-variable">c</span>(<span class="cm-string">'OBJECTID'</span>, <span class="cm-string">'scientificName'</span>)]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre><hr /><h3 id='bloque-5-cálculo-de-abundancias-relativas-de-especies-por-comunidad'><span>Bloque 5: Cálculo de abundancias relativas de especies por comunidad</span></h3><h4 id='características-del-bloque-5'><span>Características del bloque</span></h4><ul><li><p><strong><span>Objetivos de aprendizaje R</span></strong></p><ul><li><p><span>Entender algunas operaciones básicas de SQL con bases de datos (agrupar por campos, relación entre tablas)</span></p></li></ul></li><li><p><strong><span>Objetivos de aprendizaje ecológico</span></strong></p><ul><li><p><span>Comprender bien qué la diversidad depende del número de especies y de la abundancia relativa de cada especie.</span></p></li><li><p><span>Calcular la abundancia y la frecuencia relativa.</span></p></li></ul></li><li><p><strong><span>Nivel de andamiaje</span></strong></p><ul><li><p><span>Alto. El profesor lo hace y los estudiantes repiten después. Este bloque es un poco trabalenguas. Por eso lo hacemos con un nivel de andamiaje alto. Para que a nadie se le trabe la lengua :)</span></p></li></ul></li></ul><h4 id='procedimiento-en-r-5'><span>Procedimiento en R</span></h4><ul><li><p><strong><span>5.1</span></strong><span>. Primero contaremos cuántos individuos hay de cada especie en cada comunidad. Esto se hace usando una consulta SQL (Standarized Query Leanguage). Es un lenguaje muy parecido al humano, así que te resultará fácil de entender. Este lenguaje usa las siguientes funciones:</span></p><ul><li><p><code>SELECT</code><span>: Nos permite elegir las columnas que queremos en la tabla resultado. En este primer caso, necesito estas columnas:</span></p><ul><li><p><code>OBJECTID</code><span>: Código de la comunidad.</span></p></li><li><p><code>scientificName</code><span>: Nombre científico de la especie contabilizada.</span></p></li><li><p><code>num_ind_sp_com</code><span>: Es un campo nuevo que creamos en la consulta. Representa el número de individuos por especie y por comunidad. Este campo ha de crearse haciendo alguna operación matemática con algún campo de la tabla. En nuestro caso, como queremos contar cuántas especies diferentes hay, usamos el argumento </span><code>count(scientificName)</code><span>.</span></p></li></ul></li><li><p><code>FROM</code><span>: Nos permite indicar a qué tabla vamos a referirnos para hacer los cálculos. En nuestro caso la tabla es </span><code>bio</code><span>. </span></p></li><li><p><code>GROUP BY</code><span>:  Esta función nos permite elegir los campos en función de los cuales se realizará la agrupación. En nuestro caso se hará a través de los campos </span><code>OBJECTID</code><span> y </span><code>scientificName</code><span> puesto que queremos agrupar por comunidad y por especie. </span></p></li></ul></li></ul><p><span>	</span><span>El código sería algo así:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Contar el número de individuos por especie en cada comunidad (numerador de la abundancia relativa)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">T_num_ind_sp_com</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sqldf</span>(<span class="cm-string">"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">SELECT </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">OBJECTID, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  -- ID del polígono (comunidad)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">scientificName, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  -- Nombre de la especie</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">count(scientificName) AS num_ind_sp_com  -- Contar individuos</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">FROM bio </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">GROUP BY OBJECTID, scientificName &nbsp;  -- Agrupar por comunidad y especie</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 220px;"></div><div class="CodeMirror-gutters" style="display: none; height: 220px;"></div></div></div></pre><ul><li><p><strong><span>5.2.</span></strong><span> Ahora comprobamos la estructura de la tabla. Visualizamos sus 10 primeros registros con el siguiente código.</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Visualizamos los 10 primeros registros de la tabla creada</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">T_num_ind_sp_com</span>, <span class="cm-number">10</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 44px;"></div><div class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre><ul><li><p><strong><span>5.3.</span></strong><span> El siguiente paso consiste en generar el valor del denominador que usaremos para calcular la abundancia relativa. Es decir, el número total de individuos que hay en en cada comunidad. Para ello repetimos una función </span><code>SELECT</code><span> parecida a la anterior, pero usando distintos campos y agrupando únicamente por el identificador de la comunidad </span><code>OBJECTID</code><span>. El resultado del cálculo se almacena en una tabla llamada </span><code>T_num_ind_com</code><span>. El código es el siguiente</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Sumamos el número total de individuos que hay en cada comunidad (Denominador de la abundancia relativa)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">T_num_ind_com</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sqldf</span>(<span class="cm-string">"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">SELECT </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">OBJECTID, </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">sum(num_ind_sp_com) AS num_ind_com &nbsp; -- Sumar todos los individuos</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">FROM T_num_ind_sp_com </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">GROUP BY OBJECTID &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  -- Agrupar solo por comunidad</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 220px;"></div><div class="CodeMirror-gutters" style="display: none; height: 220px;"></div></div></div></pre><ul><li><p><strong><span>5.4.</span></strong><span> Al igual que antes, visualizamos los 10 primeros registros de la tabla creada:</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Visualizamos los 10 primeros registros de la tabla creada</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">T_num_ind_com</span>, <span class="cm-number">10</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 44px;"></div><div class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre><ul><li><p><strong><span>5.5.</span></strong><span> Ahora toca unir las dos tablas anteriores a través de un campo común: </span><code>OBJECTID</code><span>. De esta forma asignaremos a cada especie por comunidad el número de individuos totales de dicha comunidad. Para hacer esto, usamos una función de SQL llamada </span><code>LEFT JOIN</code><span>, que permite unir dos tablas que tienen un campo común. El resultado se almacena en una tabla llamada </span><code>T_num_ind_sp_com_mas_num_ind_com</code><span>: Tabla con el número de invididuos por especie y comunidad más el número de individuos por comunidad:</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Unimos las tablas T_num_ind_com (denominador) y T_num_ind_sp_com (numerador)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sqldf</span>(<span class="cm-string">"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">SELECT </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">OBJECTID, </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">scientificName, </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">num_ind_sp_com, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- De la tabla T_num_ind_sp_com</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">num_ind_com &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -- De la tabla T_num_ind_com</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">FROM T_num_ind_sp_com </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">LEFT JOIN T_num_ind_com USING(OBJECTID)  -- Unir por OBJECTID</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 220px;"></div><div class="CodeMirror-gutters" style="display: none; height: 220px;"></div></div></div></pre><ul><li><p><strong><span>5.6</span></strong><span> Ahora verificamos el resultado. Ya debemos saber qué función utilizar. Así, que, adelante ;)</span></p></li></ul><details>
<summary>Haz click aquí para mostrar el código a continuación. Usa esta opción si no lo consigues por ti mismo/a</summary><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span>, <span class="cm-number">10</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p></details></p><ul><li><p><strong><span>5.7</span></strong><span> Los siguientes puntos consisten en calcular la abundancia relativa y el logaritmo en base dos de la misma. En esta ocasión usaremos una aproximación distinta en R. No usaremos instrucciones SQL, sino sintaxis propia del núcleo de R. Con el símbolo </span><code>$</code><span> creamos un campo nuevo dentro de la tabla </span><code>T_num_ind_sp_com_mas_num_ind_com</code><span> . Ese campo se llamará </span><code>pi</code><span>. Resulta de dividir el numerador entre el denominador calculados anteriormente. Así:</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Calculamos la abundancia relativa de cada especie sin usar el paquete sqldf</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">pi</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">num_ind_sp_com</span> <span class="cm-operator">/</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">num_ind_com</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Comprobamos que el resultado tiene sentido</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span>, <span class="cm-number">10</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 154px;"></div><div class="CodeMirror-gutters" style="display: none; height: 154px;"></div></div></div></pre><ul><li><p><strong><span>5.8.</span></strong><span> Ahora calculamos el logaritmo en base 2 de la abundancia relativa. La función de R que hace esto se llama </span><code>log2</code><span>. Trata de crear tú el código usando la misma sintáxis de antes. El nuevo campo a crear en la tabla </span><code>T_num_ind_sp_com_mas_num_ind_com</code><span> se llamará </span><code>log2pi</code><span>. </span></p></li></ul><details>
<summary>Haz click aquí para mostrar el código a continuación. Usa esta opción si no lo consigues por ti mismo/a</summary><p>&nbsp;</p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Calculamos el logaritmo en base 2 de la abundancia relativa</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">log2pi</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">log2</span>(<span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">pi</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre><p></details></p><ul><li><p><strong><span>5.9</span></strong><span>. Por último en este bloque, obtenemos un campo nuevo llamado </span><code>pi_log2pi</code><span> que resulta de multiplicar los campos </span><code>pi</code><span> y </span><code>log2pi</code><span>.</span></p></li></ul><details>
<summary>Haz click aquí para mostrar el código a continuación. Usa esta opción si no lo consigues por ti mismo/a</summary><p>&nbsp;</p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Calculamos el término Pi * log2(Pi)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">pi_log2pi</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">pi</span> <span class="cm-operator">*</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">T_num_ind_sp_com_mas_num_ind_com</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">log2pi</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre><p></details></p><hr /><p>&nbsp;</p><h3 id='bloque-6-cálculo-del-índice-de-shannon-por-comunidad'><span>Bloque 6: Cálculo del índice de Shannon por comunidad</span></h3><h4 id='características-del-bloque-6'><span>Características del bloque</span></h4><ul><li><p><strong><span>Objetivos de aprendizaje R</span></strong></p><ul><li><p><span>Entender algunas operaciones básicas de SQL con bases de datos (agrupar por campos, relación entre tablas)</span></p></li><li><p><span>Comprender cómo agrupar los valores intermedios para obtener el índice de Shannon para cada polígono.</span></p></li><li><p><span>Entender el concepto de unión de tablas.</span></p></li></ul></li><li><p><strong><span>Objetivos de aprendizaje ecológico</span></strong></p><ul><li><p><span>Aplicar el índice de Shannon para cada polígono (=comunidad)</span></p></li></ul></li><li><p><strong><span>Nivel de andamiaje</span></strong></p><ul><li><p><span>Bajo. Los estudiantes ponen en práctica lo aprendido y realizan el proceso por sí mismos.</span></p></li></ul></li></ul><p>&nbsp;</p><h4 id='procedimiento-en-r-6'><span>Procedimiento en R</span></h4><ul><li><p><strong><span>6.1</span></strong><span> Este bloque tiene un único paso que consiste hacer el sumatorio de la expresión del índice de Shannon. Tenemos que sumar los valores del campo </span><code>pi_log2pi</code><span> de la tabla </span><code>T_num_ind_sp_com_mas_num_ind_com</code><span> agrupando por comunidad (campo </span><code>OBJECTID</code><span>). El resultado se almacena en un campo nuevo llamado </span><code>H</code><span> que está también en una tabla nueva llamada </span><code>T_Shannon</code><span>. ¿Te animas a intentarlo tú solo/a?. El punto </span><strong><span>5.3</span></strong><span> del bloque anterior te da muchas pistas sobre cómo proceder.</span></p></li></ul><details>
<summary>Haz click aquí para mostrar el código a continuación. Usa esta opción si no lo consigues por ti mismo/a</summary><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Calculamos el índice de Shannon H por comunidad sumando los términos Pi * log2(Pi) y multiplicando por -1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">T_Shannon</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sqldf</span>(<span class="cm-string">"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">SELECT </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">OBJECTID, </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">sum(pi_log2pi) * -1 AS H &nbsp; -- Índice de Shannon</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">FROM T_num_ind_sp_com_mas_num_ind_com</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">GROUP BY OBJECTID &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  -- Agrupar por comunidad</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 220px;"></div><div class="CodeMirror-gutters" style="display: none; height: 220px;"></div></div></div></pre><p></details></p><ul><li><p><strong><span>6.2.</span></strong><span> Verificamos que la tabla creada existe y tiene sentido.</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Verificamos la existencia y contenido de la tabla creada</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">T_Shannon</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 44px;"></div><div class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre><p>&nbsp;</p><hr /><h3 id='bloque-7-integración-de-resultados-numéricos-con-el-mapa-de-comunidades-y-exportación-a-formato-sig-vectorial-y-raster'><span>Bloque 7: Integración de resultados numéricos con el mapa de comunidades y exportación a formato SIG (vectorial y raster)</span></h3><h4 id='características-del-bloque-7'><span>Características del bloque</span></h4><ul><li><p><strong><span>Objetivos de aprendizaje R</span></strong></p><ul><li><p><span>Fusionar resultados tabulares (tabla con valores de H para cada comunidad) con datos espaciales (distribución de comunidades) para obtener el mapa final.</span></p></li><li><p><span>Convertir entre formatos vectorial y raster.</span></p></li><li><p><span>Exportar para visualizar fácilmente en SIG</span></p></li></ul></li><li><p><strong><span>Objetivos de aprendizaje ecológico</span></strong></p><ul><li><p><span>Entender las diferencias entre el mapa de inicial de comunidades y el resultado final que asigna a cada polígono un valor del índice de Shannon.</span></p></li></ul></li><li><p><strong><span>Nivel de andamiaje</span></strong></p><ul><li><p><span>Alto. El profesor lo hace y los estudiantes repiten después.</span></p></li></ul></li></ul><h4 id='procedimiento-en-r-7'><span>Procedimiento en R</span></h4><ul><li><p><strong><span>7.1</span></strong><span> Ya tenemos una tabla con el índice de Shannon para cada comunidad. Ahora, como queremos obtener un mapa, debemos unir dicha tabla a la capa vectorial que muestra la distribución de las comunidades. Para ello usamos la función </span><code>merge</code><span> de R. Dicha función requiere que indiquemos:</span></p><ul><li><p><code>x</code><span>: Capa espacial. En nuestro caso es </span><code>comunidades</code><span>.</span></p></li><li><p><code>y</code><span>: Tabla los valores que se unirán a la espacial. En nuestro caso es </span><code>T_Shannon</code><span>.</span></p></li><li><p><code>by.x</code><span>: Indica el campo de unión en la tabla de </span><code>comunidades</code><span>. Es el campo </span><code>OBJECTID</code></p></li><li><p><code>by.y</code><span>: Indica el campo de unión en la tabla </span><code>T_Shannon</code><span>. El campo es, también, </span><code>OBJECTID</code><span>.</span></p></li></ul><p><span>La sintaxis es así:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Unimos la tabla T_Shannon con la capa vectorial de comunidades</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">comunidades</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">merge</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">x</span> <span class="cm-arg-is">=</span> <span class="cm-variable">comunidades</span>, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Capa espacial (polígonos)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">y</span> <span class="cm-arg-is">=</span> <span class="cm-variable">T_Shannon</span>, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Tabla con índice H</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">by.x</span> <span class="cm-arg-is">=</span> <span class="cm-string">"OBJECTID"</span>, &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Campo de unión en comunidades</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">by.y</span> <span class="cm-arg-is">=</span> <span class="cm-string">"OBJECTID"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Campo de unión en T_Shannon</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 154px;"></div><div class="CodeMirror-gutters" style="display: none; height: 154px;"></div></div></div></pre></li><li><p><strong><span>7.2.</span></strong><span> Para comprobar que todo ha ido bien, podemos pedirle a R que nos muestre el contenido de la tabla. O al menos sus 10 primeros registros. ¿Recuerdas cómo se hace?</span></p></li></ul><details>
<summary>Haz click aquí para mostrar el código a continuación. Usa esta opción si no lo consigues por ti mismo/a</summary><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Mostramos los 10 primeros registros de la tabla de atributos de comunidades para verificar que el índice H se ha añadido correctamente</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">comunidades</span>, <span class="cm-number">10</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre><p></details></p><ul><li><p><strong><span>7.3</span></strong><span> El penúltimo paso del bloque y de la práctica consiste en generar un fichero de formas (shapefile) llamado </span><code>Shannon_sierra_nevada</code><span> a partir de la capa </span><code>comunidades</code><span>que tenemos en R. Ya tienes manejo suficiente como para hacerlo por ti mismo/a. </span></p></li></ul><details>
<summary>Haz click aquí para mostrar el código a continuación. Usa esta opción si no lo consigues por ti mismo/a</summary><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Exportamos la capa de comunidades con el índice de Shannon a un archivo shapefile para visualizar en QGIS</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">st_write</span>(<span class="cm-variable">comunidades</span>, <span class="cm-string">"Shannon_sierra_nevada.shp"</span>, <span class="cm-variable">append</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre><p></details></p><ul><li><p><strong><span>7.4</span></strong><span> También podemos exportar la capa a formato Raster. Esto nos resultará útil cuando queramos conocer el valor promedio de diversidad de cada tipo de ecosistema. Podríamos hacer este paso en QGIS, pero ya que somos unos expertos en R, vamos a intentarlo. Os doy alguna pista:</span></p><ul><li><p><span>Para rasterizar una capa en R primero hay que crear un raster vacío que llamaremos </span><code>plantilla_raster</code><span>. Para eso usamos la función </span><code>rast</code><span>. Diremos que dicha plantilla tiene 100 m de resolución y el mismo sistema de coordenadas que </span><code>comunidades</code><span>.</span></p></li><li><p><span>Luego, usaremos la función </span><code>rasterize</code><span> para convertir la capa vectorial </span><code>comunidades</code><span> en un raster en formato R. Llamaremos </span><code>Shannon_raster</code><span> a esta capa.</span></p></li><li><p><span>El último paso consiste en exportar ese objeto a un archivo con extensión </span><code>tif</code><span>. Eso lo haremos con la función </span><code>writeRaster</code><span>. </span></p></li></ul><p><span>¿Te animas a intentarlo tú?</span></p></li></ul><details>
<summary>Haz click aquí para mostrar el código a continuación. Usa esta opción si no lo consigues por ti mismo/a</summary><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Exportamos a formato raster con resolución de 100 metros</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Primero, creamos una plantilla raster con la extensión y resolución deseada</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plantilla_raster</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rast</span>(<span class="cm-variable">comunidades</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">resolution</span> <span class="cm-operator">=</span> <span class="cm-number">100</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">crs</span> <span class="cm-operator">=</span> <span class="cm-variable">st_crs</span>(<span class="cm-variable">comunidades</span>)<span class="cm-operator cm-dollar">$</span><span class="cm-variable">proj4string</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Creamos un archivo Tiff para el índice de Shannon</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">shannon_raster</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rasterize</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">comunidades</span>, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Capa vectorial con el índice H</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plantilla_raster</span>, &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Plantilla raster</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">field</span> <span class="cm-arg-is">=</span> <span class="cm-string">"H"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment"># Campo que contiene el índice de Shannon</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Guardamos el raster en un archivo GeoTIFF</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">writeRaster</span>(<span class="cm-variable">shannon_raster</span>, <span class="cm-string">"Shannon_sierra_nevada.tif"</span>, <span class="cm-variable">overwrite</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 308px;"></div><div class="CodeMirror-gutters" style="display: none; height: 308px;"></div></div></div></pre><p></details></p><ul><li><p><strong><span>7.5</span></strong><span> Ya solo queda abrir el shapefile creado con QGIS, dale colores en virtud del campo </span><code>H</code><span> y observar los patrones espaciales existentes: </span></p><ul><li><p><span>Cargamos en QGIS la capa raster obtenida al final del flujo de trabajo anterior.</span></p></li><li><p><span>Clasificamos en función de los valores numéricos de cada píxel de la siguiente manera:</span></p><ul><li><p><span>Método de clasificación: Banda sencilla pseudocolor.</span></p></li><li><p><span>Rampa de colores: Spectral</span></p></li><li><p><span>Modo de clasificación: quantiles</span></p></li></ul></li></ul></li></ul><p>&nbsp;</p><h2 id='resultados-esperables'><span>Resultados esperables</span></h2><p><span>El siguiente mapa muestra el resultado obtenido en esta práctica. Se trata de una representación del fichero vectorial obtenido. En esta representación se ha asignado el valor del índice Shannon a cada polígono del mapa de vegetación inicial. El mapa se ha obtenido de la siguiente forma:</span></p><p>&nbsp;</p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/main/imagenes/shannon_snev.png" alt="shannon"></p><p>&nbsp;</p><p><span>En el mapa resultante se pueden identificar varios patrones de distribución espacial de la biodiversidad en Sierra Nevada. En teoría estudiamos esto desde un punto de vista conceptual. Ahora toca reflexionar de manera práctica con el mapa delante: </span></p><ul><li><p><span>¿Cómo cambia la diversidad al aumentar la altitud?</span></p></li><li><p><span>¿A qué se puede deber dicho patrón?</span></p></li><li><p><span>¿Crees que se repetiría el mismo patrón en otras montañas de la Tierra?</span></p></li><li><p><span>¿hay algún patrón de cambio de diversidad en dirección este-oeste?</span></p></li><li><p><span>En caso afirmativo, ¿a qué puede deberse?</span></p></li><li><p><span>Hemos identificado una serie de patrones visualmente. ¿cómo crees que podríamos cuantificarlos y comprobar si realmente existen?</span></p></li></ul><p>&nbsp;</p><p>&nbsp;</p><h2 id='conexión-de-la-práctica-con-el-trabajo-sobre-tipos-de-ecosistemas'><span>Conexión de la práctica con el trabajo sobre tipos de ecosistemas</span></h2><p><span>El flujo de trabajo descrito arriba permite obtener un mapa de diversidad de Sierra Nevada asumiendo que cada polígono del mapa de vegetación es una comunidad. Esto nos permitirá estudiar patrones espaciales de cambio de la diversidad a escala de todo el territorio. Pero para nuestro trabajo tenemos dos objetivos:</span></p><h3 id='creación-de-una-tabla-con-los-valores-promedio-de-h-en-cada-tipo-de-ecosistema'><span>Creación de una tabla con los valores promedio de H en cada tipo de ecosistema</span></h3><p><span>Para hacer esto tendremos que añadir al flujo de trabajo los siguientes pasos:</span></p><ul><li><p><span>Combinar de alguna manera (con R o con QGIS) el mapa de diversidad obtenido (en formato raster) con el mapa de distribución de los ecosistemas de Sierra Nevada.</span></p></li><li><p><span>Calcular el valor promedio de todos los píxeles del mapa de diversidad en cada uno de los ecosistemas de Sierra Nevada. </span></p></li></ul><p><span>Esta es la parte que tendréis que hacer vosotros individualmente. Para ello necesitáis usar </span><a href='https://github.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/raw/refs/tags/2024_2025/geoinfo/ecosistemas_snev_dissolve.zip'><span>esta</span></a><span> capa (</span><em><span>ecosistemas_snev_dissolve.shp</span></em><span>) que muestra la distribución de los ecosistemas de Sierra Nevada. Al mostrarla en QGIS veréis que es una capa vectorial con polígonos. Pero tiene una particularidad. Es una capa en la que todos los polígonos que tienen el mismo tipo de ecosistema se han fusionado en uno solo. Aunque visualmente aparezcan como muchos polígonos, en realidad para el SIG y para la tabla de atributos de la capa, computa como un único polígono. Por eso, cuando abráis la tabla de atributos, veréis solo 12 filas que corresponden con los 12 tipos de ecosistemas que hay en Sierra Nevada según esta capa. </span></p><p><span>Tendréis que buscar un método para asignar acada polígono de esta capa el valor promedio de índice de Shannon de todos los píxeles que contiene cada tipo de ecosistema. Por ejemplo, para el polígono marcado en rojo de la imagen inferior, se calculará el valor promedio del índice de Shannon de todos los píxeles que tiene dentro (mostrados en una gama de colores del rojo al verde). Podéis hacer esto en QGIS o en R. Es importante que preguntéis a ChatGPT o a cualquier IA para dar con el método adecuado. Las palabras claves podrían ser: extraer información de un raster a una capa poligonal, asignar estadísticas de un raster a una capa de polígonos, etc.</span></p><p><span>Y para terminar, una pista muy buena: habéis hecho ya algo parecido con Jorge en la asignatura de SIG. Recordad cuando asignásteis a cada ecosistema su altura...</span></p><p>&nbsp;</p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/2024_2025/imagenes/zonal_statistics.png" alt="zonal"></p><p>&nbsp;</p><p><span>El resultado a obtener en la parte de asignar valores promedios de diversidad a cada tipo de ecosistema es una tabla parecida a esta:</span></p><p>&nbsp;</p><figure class='table-figure'><table><thead><tr><th><span>nombre</span></th><th><span>Shape_Leng</span></th><th><span>Shape_Area</span></th><th><span>id_poligon</span></th><th><span>_mean</span></th><th><span>_stdev</span></th></tr></thead><tbody><tr><td><span>Robledales</span></td><td><span>52.892.133.605.783</span></td><td><span>13.169.454.140.145.700</span></td><td><span>1487</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Pastos de media montaña</span></td><td><span>320.664.866.227.179</span></td><td><span>32.480.149.403.061.500</span></td><td><span>461</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Sistemas acuáticos</span></td><td><span>453.913.381.244.217</span></td><td><span>637.886.087.970.162</span></td><td><span>1174</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Pastizales, canchales y roquedos de Alta Montaña</span></td><td><span>584.048.237.224.741</span></td><td><span>4.128.511.106.604.420</span></td><td><span>1</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Encinares</span></td><td><span>256.310.502.294.566</span></td><td><span>29.595.384.661.394.400</span></td><td><span>79</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Pinares autóctonos sobre dolomías</span></td><td><span>15.731.043.794.798</span></td><td><span>817.195.403.492.786</span></td><td><span>756</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Enebrales-piornales</span></td><td><span>137.637.568.034.509</span></td><td><span>6.368.878.775.305.160</span></td><td><span>766</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Cultivos de montaña extensivos</span></td><td><span>99.446.226.983.354</span></td><td><span>6.026.301.713.036.190</span></td><td><span>951</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Pinares de repoblación</span></td><td><span>149.243.344.304.335</span></td><td><span>6.430.065.174.753.230</span></td><td><span>1244</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Pinares autóctonos de P. sylvestris</span></td><td><span>795.679.016.504.942</span></td><td><span>10.146.799.532.010.600</span></td><td><span>1172</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Borreguiles</span></td><td><span>476.411.929.684.921</span></td><td><span>659.306.197.944.578</span></td><td><span>891</span></td><td><span>x</span></td><td><span>x</span></td></tr><tr><td><span>Matorral media montaña</span></td><td><span>17.686.177.336.196</span></td><td><span>16.753.416.186.208.000</span></td><td><span>208</span></td><td><span>x</span></td><td><span>x</span></td></tr></tbody></table></figure><p>&nbsp;</p><p><span>En los campos </span><em><span>_mean</span></em><span> y </span><em><span>_stdev</span></em><span> se almacenarán respectivamente los valores promedio y la desviación estándard de la diversidad para cada tipo de ecosistema. Ahora toca reflexionar sobre los resultados obtenidos:</span></p><ul><li><p><span>¿Qué ecositema tiene menos diversidad?, ¿por qué?</span></p></li><li><p><span>¿Cuál es más diverso?, ¿por qué?</span></p></li><li><p><span>¿En qué categoría podríamos poner los bosques de ribera? ¿por qué no aparecen en la lista?</span></p></li><li><p><span>También tenéis que pensar una forma de representar la diversidad de vuestro ecosistema en el trabajo de manera que se pueda comparar fácilmente con los demás ecosistemas.</span></p></li></ul><p>&nbsp;</p><h3 id='mapa-de-diversidad-de-tu-ecosistema'><span>Mapa de diversidad de tu ecosistema</span></h3><p><span>Además de este resultado numérico para cada ecosistema, también será interesante que creéis un mapa de diversidad de todas las comunidades ocupadas por vuestro ecosistema. Esto os permitirá saber si, por ejemplo, los encinares del sur son más o menos diversos que los del norte. Para hacer esto bastará con que recortéis en Qgis la capa que hemos obtenido en esta práctica en formato vectorial usando como molde la delimitación de vuestro ecosistema que está contenido en la capa de ecosistemas descargada anteriormente. Es decir, tendréis que hacer una operación </span><code>clip</code><span> en la que la capa destino es la que contiene la información del índice de Shannon y la que hace de &quot;molde&quot; es el mapa de ecosistemas. Puedes hacer esto en QGIS con la función de recortar un raster con un fichero vectorial. </span></p><p><span>El siguiente mapa muestra algo con el aspecto de lo que deberías obtener.</span></p><p>&nbsp;</p><p><img src="https://raw.githubusercontent.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/main/imagenes/diversidad_encinares.png" alt="diversidad_encinar"></p><p>&nbsp;</p><p>&nbsp;</p><hr /><p><a href='https://github.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/archive/refs/tags/2024_2025.zip'><span>Aquí</span></a><span> puedes descargar un archivo .zip que contiene este guión en formato html y todo el material que incluye.</span></p><hr /><p><span>Haz click </span><a href='https://github.com/aprendiendo-cosas/P_shannon_ecologia_ccaa/releases'><span>aquí</span></a><span> para ver cómo ha cambiado este guión en los distintos cursos académicos.</span></p><hr /> <p xmlns:cc="http://creativecommons.org/ns#" >El contenido de este repositorio se puede utilizar bajo la siguiente licencia:  <a  href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"  target="_blank" rel="license noopener noreferrer"  style="display:inline-block;">CC BY-NC-SA 4.0<img  style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"   src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"  alt=""><img  style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"   src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"  alt=""><img  style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"   src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1"  alt=""><img  style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"   src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"  alt=""></a></p> <p>Esta licencia no aplica a enlaces a artículos, libros o imágenes no originales. Estos productos tienen su licencia correspondiente.</p></div></div>
</body>
</html>